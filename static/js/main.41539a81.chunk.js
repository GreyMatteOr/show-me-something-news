(this["webpackJsonpshow-me-something-news"]=this["webpackJsonpshow-me-something-news"]||[]).push([[0],{27:function(e,t,r){},28:function(e,t,r){},34:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(21),a=r(10),i=r(11),c=r(15),o=r(14),h=(r(27),r.p+"static/media/loading.b33cf617.png"),u=r(7),l=r.p+"static/media/newspaper.15485f19.png";r(28);var d=function(e){var t=e.article;return Object(n.jsxs)(u.b,{to:t.web_url,className:"news-card","data-testid":"news-card",children:[function(){var e=t.multimedia.find((function(e){return"image"===e.type&&e.width>=160})),r="https://www.nytimes.com/";return void 0===e?r=l:r+=e.url,Object(n.jsx)("img",{"data-testid":"nc-image",src:r,alt:'"'.concat(t.headline.main,'"')})}(),Object(n.jsxs)("section",{className:"article-text",children:[Object(n.jsx)("h2",{className:"nc-title",children:t.headline.main}),Object(n.jsx)("h4",{children:t.byline.original}),Object(n.jsxs)("h4",{children:["Published: ",Object(n.jsx)("time",{children:new Date(t.pub_date).toDateString()})]}),Object(n.jsx)("p",{"data-testid":"nc-summary",children:function(){var e=t.abstract.length>t.lead_paragraph.length?t.abstract:t.lead_paragraph;return 0===e.length&&(e="".concat(t.type_of_material,": ").concat(t.headline.main)),e}()})]})]})},p=(r(34),r(1)),b=r.n(p),j=r(19),m=r.n(j),g=r(23),f={url:"https://wordsapiv1.p.rapidapi.com/words/",getRandomWord:function(){return fetch(f.url+"?random=true",{method:"GET",headers:{"x-rapidapi-key":"7db29738cbmsh471ad5d986747b7p1cb45ajsnfd84ea900f54","x-rapidapi-host":"wordsapiv1.p.rapidapi.com"}}).then((function(e){return e.ok?e.json():"error"}))},getPhrase:function(e){var t=arguments;return Object(g.a)(m.a.mark((function r(){var n,s,a,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.length>1&&void 0!==t[1]?t[1]:[],s=[];case 2:if(!(s.length<e)){r.next=17;break}a=Math.floor(10*Math.random());case 4:if(!(n.length<=a)){r.next=13;break}return r.next=7,f.getRandomWord();case 7:if("error"!==(i=r.sent)){r.next=10;break}return r.abrupt("return","error");case 10:n=n.concat(f.parseValues(i)),r.next=4;break;case 13:s.push(n[a]),n=n.slice(a+1),r.next=2;break;case 17:return r.abrupt("return",s);case 18:case"end":return r.stop()}}),r)})))()},parseValues:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:typeof e;if(void 0===e||null===e)return[];if(Array.isArray(e))return e.reduce((function(e,t){return e.concat(f.parseValues(t))}),[]);if("object"===t){var r=[];return Object.entries(e).forEach((function(e){"pronunciation"!==e[0]&&(r=r.concat(f.parseValues(e[1])))})),r}return"string"===t?e.split(" ").filter((function(e){return!(e.length<=3)&&!["adjective","adverb","article","conjunction","determiner","interjection","noun","preposition","pronoun","verb"].includes(e)})):[]}},x={url:"https://api.nytimes.com/svc/search/v2/articlesearch.json?",key:"&api-key=L5x1jxc7BGK5GdsesCTan33ncRlP52P6",getArticles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"relevance";return fetch(x.url+"q=".concat(e)+x.key+"&page=".concat(t)+"&sort=".concat(r)).then((function(e){return e.ok?e.json():"error"}))}},O=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var s;return Object(a.a)(this,r),(s=t.call(this,e)).NewsCards=function(e){return e.articles.reduce((function(e,t){return e.every((function(e){return e.web_url!==t.web_url}))&&e.push(t),e}),[]).map((function(e,t){return Object(n.jsx)(d,{article:e},t)}))},s.state={articles:[],currentPage:s.props.currentPage},s}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.isError||this.getArticles(this.props.query,this.props.currentPage,this.props.sort)}},{key:"componentWillReceiveProps",value:function(e){var t=e.query!==this.props.query,r=e.currentPage!==this.props.currentPage,n=e.sort!==this.props.sort;!this.props.isError&&(t||r||n)&&this.getArticles(e.query,e.currentPage,e.sort)}},{key:"getArticles",value:function(e,t,r){var n=this;this.props.setAppState({loadingOverlayState:"shown"}),x.getArticles(e,t-1,r).then((function(e){if("error"===e)return n.setState({isError:!0,isLoading:!1,loadingOverlayState:"hidden"});n.setState({articles:e.response.docs||[null]}),n.props.setAppState({isError:!1,isLoading:!1,loadingOverlayState:"hidden",pageMax:Math.min(Math.ceil(e.response.meta.hits/10),100)})})).catch((function(){n.props.setAppState({isError:!0,isLoading:!1,loadingOverlayState:"hidden"})}))}},{key:"render",value:function(){return this.props.isError?Object(n.jsx)("h3",{children:"Looks like something went wrong! Refresh the page to try again."}):null===this.state.articles[0]?Object(n.jsxs)("h3",{children:["Looks like '",this.props.query,"' didn't turn up any results. Hit the 'Show Me Something News' button to try again. Increasing the number of words to generate may also help!"]}):Object(n.jsx)(this.NewsCards,{articles:this.state.articles})}}]),r}(p.Component),v=r(3),y=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).About=function(e){return Object(n.jsx)("div",{className:e.disp,onClick:function(){return i.setState({showAbout:!i.state.showAbout})},children:Object(n.jsxs)("div",{className:"about-holder",children:[Object(n.jsx)("h4",{className:"about-text",children:"About Show Me Something News"}),Object(n.jsx)("p",{className:"about-text",children:"Many people these days are concerned about how they are served the media they are consuming. There are algorithms in charge of curating content on most of the popular social media sites. On the surface, this doesn't seem terrible. However, it has recently come to light that there are some terrible repurcussions to the current way mass-media is provided. To those that would experiment with a life outside of intentional media seeking you out, Show Me Something News is a means of accessing high-quality articles from the New York Times but for randomly-generated topics."}),Object(n.jsx)("p",{className:"about-text",children:"By default, a single random word is generated at random. From there, articles about this topic are fetched and displayed. Single-word queries typically provide a smaller, but more focused and predictable result. To increase complexity, merely increase the number of search-terms in the preferences. The phrase will not be completely random, as the words will be moderately related."}),Object(n.jsxs)("p",{className:"about-text",children:["The words are generated using ",Object(n.jsx)("a",{href:"https://www.wordsapi.com",children:"WORDSAPI"})," and ",Object(n.jsx)("a",{href:"https://developers.nytimes.com",children:"NYTAPI"}),". If you're curious about the developer, please check out ",Object(n.jsx)("a",{href:"https://github.com/greymatteor",children:"my GitHub profile"}),"."]})]})})},i.createSelect=function(e,t,r){var a=Object(n.jsx)(n.Fragment,{});r&&(a=Object(n.jsx)("button",{id:"select-btn",onClick:r.onClick,children:r.text}));for(var c=arguments.length,o=new Array(c>3?c-3:0),h=3;h<c;h++)o[h-3]=arguments[h];var u=o.map((function(e,t){return Object(n.jsx)("option",{value:e,children:e},t)}));return Object(n.jsxs)("div",{className:"preferences-select",children:[t,a,Object(n.jsx)("select",{name:e,onChange:function(e){return i.setState(Object(s.a)({},e.target.name,e.target.value))},children:u})]})},i.getNewPhrase=function(){f.getPhrase(i.state.numWords).then((function(e){if("error"===e)return i.setState({isError:!0,isLoading:!1});i.setState({query:e.join(" "),currentPage:1,isLoading:!1})})).catch((function(){return i.setState({isError:!0,isLoading:!1})}))},i.setSort=function(){i.setState({sort:i.state.mightSortBy})},i.Header=function(){var e=i.state.showPreferences?"search-preferences":"search-preferences hidden";return Object(n.jsxs)("header",{"data-testid":"header",children:[Object(n.jsx)("button",{id:"title-btn",onClick:i.getNewPhrase,children:Object(n.jsx)("h1",{children:"Show Me Something News"})}),Object(n.jsxs)("h2",{children:['...about: "'.concat(i.state.query),'"']}),Object(n.jsxs)("section",{className:"header-right",children:[Object(n.jsx)("div",{className:e,children:i.createSelect("numWords","words per phrase",null,1,2,3,4,5)}),Object(n.jsxs)("div",{id:"header-right-btns",children:[Object(n.jsx)("button",{className:"hr-btn",onClick:function(){return i.setState({showPreferences:!i.state.showPreferences})},children:"adjust preferences"}),Object(n.jsx)("button",{className:"hr-btn",onClick:function(){return i.setState({showAbout:!i.state.showAbout})},children:"about"})]})]})]})},i.Home=function(){return Object(n.jsx)(O,{currentPage:1,isError:i.state.isError,query:i.state.query,setAppState:i.setAppState,sort:i.state.sort})},i.OffsetPage=function(e){return Object(n.jsx)(O,{currentPage:+e.match.params.pageNum,isError:i.state.isError,query:i.state.query,setAppState:i.setAppState,sort:i.state.sort})},i.PageSelect=function(e){for(var t=[];t.length<e.pageMax;){var r=t.length+1;t.push(Object(n.jsx)(u.c,{to:"/page/".concat(r),children:Object(n.jsx)("button",{children:r})},r))}return Object(n.jsx)("div",{className:"page-selection",children:t})},i.setAppState=function(e){i.setState(e)},i.state={numPhrases:1,isError:!1,isLoading:!0,loadingOverlayState:"shown",mightSortBy:"relevance",numWords:1,pageMax:1,query:null,showAbout:!1,showPreferences:!1,sortBy:"relevance"},i}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.getNewPhrase()}},{key:"render",value:function(){if(this.state.isLoading)return Object(n.jsx)("div",{className:"on-load-spin",children:Object(n.jsx)("img",{className:"spin",src:h,alt:"Loading Content"})});var e={text:"Sort By",onClick:this.setSort},t=this.state.showAbout?"about-show":"";return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(this.Header,{}),Object(n.jsx)(this.About,{disp:"about-overlay ".concat(t)}),Object(n.jsxs)("main",{children:[this.createSelect("mightSortBy",null,e,"relevance","newest","oldest"),Object(n.jsx)(this.PageSelect,{pageMax:this.state.pageMax}),Object(n.jsx)("div",{className:this.state.loadingOverlayState,children:Object(n.jsx)("img",{className:"spin",src:h,alt:"Loading Content"})}),Object(n.jsx)(v.a,{exact:!0,path:"/",component:this.Home}),Object(n.jsx)(v.a,{exact:!0,path:"/page/:pageNum",component:this.OffsetPage}),Object(n.jsx)(v.a,{path:"/about",component:this.About})]})]})}}]),r}(p.Component),w=r(24),S=r.n(w);r(39);S.a.render(Object(n.jsx)(u.a,{children:Object(n.jsx)(b.a.StrictMode,{children:Object(n.jsx)(y,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.41539a81.chunk.js.map